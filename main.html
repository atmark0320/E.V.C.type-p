<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>E.V.C.type:p</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- メインコンテンツ -->
    <div id="mainContent">
        <h1>E.V.C.type:p <span class="manual-link">マニュアル</span></h1>
        
        <!-- 出走数と着順候補選択エリア -->
        <div class="container">
            <h2>レース設定</h2>
            <table>
                <thead>
                    <tr>
                        <th>出走数</th>
                        <th>1着候補</th>
                        <th>2着候補</th>
                        <th>目標回収率(%)</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><select id="carCount" onchange="generateCarInputs()">
                            <option value="">選択してください</option>
                            <option value="5">５</option>
                            <option value="6">６</option>
                            <option value="7">７</option>
                            <option value="8">８</option>
                            <option value="9">９</option>
                        </select></td>
                        <td><select id="firstSelect" onchange="updateProbabilityInputs()" ontouchstart="this.focus();updateProbabilityInputs()"></select></td>
                        <td><select id="secondSelect" onchange="updateProbabilityInputs()" ontouchstart="this.focus();updateProbabilityInputs()"></select></td>
                        <td><input type="number" id="targetRecovery" min="1" max="1000" step="1" value="100"></td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- 確率入力エリア -->
        <div class="container">
            <h2>確率入力</h2>
            <div class="probability-table-wrapper">
                <div id="probabilityInputs"></div>
            </div>
        </div>

        <!-- ボタンエリア -->
        <div class="container">
            <div class="button-container">
                <button onclick="calculateOdds()" disabled id="calcButton">計算する</button>
                <button onclick="saveSelectedBets()" disabled id="saveButton">選択を保存</button>
                <button onclick="resetForm()" id="resetButton">リセット</button>
            </div>
        </div>

        <!-- 結果表示エリア -->
        <div id="results" class="container"></div>

        <!-- 保存された買い目表示エリア -->
        <div class="container">
            <h2>保存された買い目</h2>
            <div id="savedBets" class="saved-bets"></div>
        </div>

        <!-- エラーモーダル -->
        <div id="errorModal">
            <p id="errorMessage" class="error"></p>
            <button onclick="closeModal()">閉じる</button>
        </div>

        <!-- マニュアルオーバーレイ -->
        <div id="manualOverlay" onclick="closeManualModal()"></div>

        <!-- マニュアルモーダル -->
        <div id="manualModal">
            <h2>E.V.C.type:p 操作マニュアル</h2>
            <h3>概要</h3>
            <p>「E.V.C.type:p」は、競輪の二連単および三連単の予想オッズを計算するためのツールです。出走数、1着・2着候補、各枠番の着順確率を入力することで、目標回収率に基づいた必要オッズを計算し、買い目を保存できます。</p>
            <!-- マニュアル内容は省略せず、そのまま保持 -->
            <button onclick="closeManualModal()">閉じる</button>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
